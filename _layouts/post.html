<!DOCTYPE html>
<html lang="zh-TW">

<head>
  {% include google-analytics.html %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }}</title>
  <link rel="icon" type="image/png" href="{{ '/assets/images/favicon.png' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4087964762824382"
    crossorigin="anonymous"></script>
</head>

<body>

  {% include navbar.html %} <!-- ğŸ”¥ ä½ çš„å°èˆªåˆ— -->
  <div class="container">
    <div class="row layout-flex">
      <!-- Main Content Column -->
      <main class="post-content">
        <!-- Breadcrumbs -->
        <div class="breadcrumbs">
          <a href="{{ '/' | relative_url }}">é¦–é </a> <span>&gt;</span>
          {% assign current_category = page.categories | last %}
          {% for cat in site.data.categories %}
          {% if cat.slug == current_category %}
          <a href="{{ cat.permalink | relative_url }}">{{ cat.title }}</a>
          {% endif %}
          {% endfor %}
          <span>&gt;</span> {{ page.title }}
        </div>

        <h1>{{ page.title }}</h1>

        <!-- Metadata with Reading Time -->
        <p>
          <strong>ç™¼ä½ˆæ—¥æœŸï¼š</strong> {{ page.date | date: "%Y-%m-%d" }}
          <span class="reading-time">
            {% assign words = content | number_of_words %}
            {% assign reading_time = words | divided_by: 300 | plus: 1 %}
            é ä¼°é–±è®€æ™‚é–“ï¼š{{ reading_time }} åˆ†é˜
          </span>
        </p>

        <!-- å–å¾— YAML è³‡æ–™ä¸­çš„åˆ†é¡è³‡è¨Š -->
        {% assign current_category = page.categories | last %}
        {% assign category_info = nil %}
        {% for cat in site.data.categories %}
        {% if cat.slug == current_category %}
        {% assign category_info = cat %}
        {% endif %}
        {% endfor %}

        {% if category_info %}
        <div class="post-category">
          <a href="{{ category_info.permalink | prepend: site.baseurl }}">
            {{ category_info.title }}
          </a>
        </div>
        {% endif %}

        <hr>

        <!-- Table of Contents Container -->
        <div class="toc-container" id="toc-container" style="display:none;">
          <div class="toc-title">ç›®éŒ„</div>
          <div id="toc"></div>
        </div>

        <hr>

        {% if page.tags contains 'ä½ è¡Œä½ ä¸Š' or page.tags contains 'YouNameIt' %}
        {% include name_switcher.html %}
        {% endif %}


        {% include locker.html %}


        <!-- ä¸Šä¸‹ç¯‡é€£çµé–‹å§‹ -->
        {% comment %}
        å…ˆæ”¶é›†åŒä¸€åˆ†é¡çš„æ–‡ç« ï¼Œå†æ’åºï¼Œä¸¦æ‰¾å‡ºç•¶å‰æ–‡ç« çš„ä½ç½®
        {% endcomment %}
        {% assign current_category = nil %}
        {% for cat in page.categories %}
        {% if cat != "åŒäºº" and cat != "TWICE" %}
        {% assign current_category = cat %}
        {% break %}
        {% endif %}
        {% endfor %}

        {% if current_category == nil %}
        {% assign current_category = page.categories | last %}
        {% endif %}

        {% assign related_posts = site.posts | where_exp:"post", "post.categories contains current_category" | sort:
        "date" %}
        {% for post in related_posts %}
        {% if post.url == page.url %}
        {% assign index = forloop.index0 %}
        {% endif %}
        {% endfor %}

        <nav class="post-navigation">

          {% if index and index > 0 %}
          {% assign prev_index = index | minus: 1 %}
          {% assign prev_post = related_posts[prev_index] %}
          <a class="prev-post" href="{{ prev_post.url | prepend: site.baseurl }}">
            {{ prev_post.title }}
          </a>
          {% else %}
          <!-- Spacer if no prev post -->
          <div style="flex:1;"></div>
          {% endif %}

          {% assign last_index = related_posts.size | minus: 1 %}
          {% if index and index < last_index %} {% assign next_index=index | plus: 1 %} {% assign
            next_post=related_posts[next_index] %} <a class="next-post"
            href="{{ next_post.url | prepend: site.baseurl }}">
            {{ next_post.title }}
            </a>
            {% else %}
            <!-- Spacer if no next post -->
            <div style="flex:1;"></div>
            {% endif %}
        </nav>
        <p>ç•™è¨€è¦ä½œè€…æ‰‹å‹•å¯©æ ¸å¾Œæ‰æœƒç™¼ä½ˆï¼Œå¦‚æœæ²’å³æ™‚å‡ºç¾æ˜¯æ­£å¸¸ç¾è±¡ï¼Œè«‹è€å¿ƒç­‰å€™</p>
        <!-- ä¸Šä¸‹ç¯‡é€£çµçµæŸ -->

        <!-- ğŸ—¨ï¸ Cusdis ç•™è¨€å€ -->
        <div class="comment-wrapper">
          <div id="cusdis_thread" data-host="https://cusdis.com" data-app-id="f159c841-cfd2-4ec9-8f09-969c7e3b68b1"
            data-page-id="{{ page.url }}" data-page-url="{{ site.url }}{{ page.url }}"
            data-page-title="{{ page.title }}" data-theme="dark">
          </div>
        </div>
        <script async defer src="https://cusdis.com/js/cusdis.es.js"></script>

      </main>

      <!-- Sidebar Column -->
      <aside class="sidebar">
        {% include sidebar.html %}
      </aside>

    </div>

    <footer>
      <p>ç‰ˆæ¬Šæ‰€æœ‰ &copy; {{ site.time | date: "%Y" }}</p>
    </footer>
    <!-- Core JS for TOC -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const content = document.querySelector('.post-content');
        const headings = content.querySelectorAll('h2, h3');
        const tocContainer = document.getElementById('toc-container');
        const toc = document.getElementById('toc');

        if (headings.length >= 2) {
          tocContainer.style.display = "block";
          const ul = document.createElement('ul');

          headings.forEach((heading, index) => {
            if (!heading.id) {
              heading.id = 'heading-' + index;
            }

            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = '#' + heading.id;
            a.textContent = heading.textContent;

            if (heading.tagName === 'H3') {
              const nestedUl = document.createElement('ul');
              const nestedLi = document.createElement('li');
              nestedLi.appendChild(a);
              nestedUl.appendChild(nestedLi);
              li.appendChild(nestedUl);
            } else {
              li.appendChild(a);
            }
            ul.appendChild(li);
          });

          toc.appendChild(ul);
        }
      });
    </script>
</body>

</html>